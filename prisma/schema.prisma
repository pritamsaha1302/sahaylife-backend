generator client {
  provider = "prisma-client-js"
  output   = "../node_modules/@prisma/client"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id              String    @id @default(uuid()) @db.Uuid
  cognitoId       String    @unique @map("cognito_id") @db.VarChar(255)
  fullName        String?   @map("full_name") @db.VarChar(150)
  username        String?   @unique @db.VarChar(100)
  email           String    @unique @db.VarChar(255)
  phone           String?   @db.VarChar(20)
  avatarUrl       String?   @map("avatar_url")
  gender          String?   @db.VarChar(20)
  dateOfBirth     DateTime? @map("date_of_birth") @db.Date
  role            String    @default("user") @db.VarChar(50)
  permissions     Json?
  emailVerified   Boolean   @default(false) @map("email_verified")
  phoneVerified   Boolean   @default(false) @map("phone_verified")
  isBlocked       Boolean   @default(false) @map("is_blocked")
  lastLoginAt     DateTime? @map("last_login_at")
  planType        String    @default("free") @map("plan_type") @db.VarChar(50)
  planExpiresAt   DateTime? @map("plan_expires_at")
  signupSource    String?   @map("signup_source") @db.VarChar(50)
  appVersion      String?   @map("app_version") @db.VarChar(20)
  country         String?   @db.VarChar(100)
  state           String?   @db.VarChar(100)
  city            String?   @db.VarChar(100)
  isDoctor        Boolean   @default(false) @map("is_doctor")
  doctorLicense   String?   @map("doctor_license") @db.VarChar(100)
  createdAt       DateTime  @default(now()) @map("created_at")
  updatedAt       DateTime  @default(now()) @updatedAt @map("updated_at")

  @@index([cognitoId], map: "idx_users_cognito_id")
  @@index([email], map: "idx_users_email")
  @@index([phone], map: "idx_users_phone")
  @@index([role], map: "idx_users_role")
  @@map("users")
}
